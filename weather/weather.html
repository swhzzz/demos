<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src='http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js'></script>
	<style>
		a {
			color: inherit;
			text-decoration: none;
		}
		.wrap {
			width: 300px;
			margin: 0 auto;
			padding: 15px;
			text-align: left;
			border: 1px solid #ccc;
			border-radius: 5px;
			box-shadow: 0px 5px 5px rgba(0,0,0,0.5)
		}
		.btn {
			font-size: 14px;
		}
	</style>
</head>
<body>
	<div class="wrap">
		<input id='city' type="text" placeholder="请输入一个城市">
		<a href="javascript:void(0)" class="btn">确定</a>
		<div class="ct"></div>
	</div>
	
	
	<script>
		$('.btn').on('click',function(){
			var value=$('#city').val();
			if((/[\d\w]/.test(value))){
				alert('别闹，输入一个城市名字');
				return;
			}

			$.ajax({
			method: 'get',
			url: 'http://api.jirengu.com/weather.php',
			dataType: 'jsonp',
			data: {
				city: value
			}
			}).done(function(data){
				render(data.results[0]);
				})
		})


		function render(data){
			var weather=data.weather_data;
			var str='';
			str+='<p>'+weather[0].date+'</p>';
			str+='<p>所在地：'+data.currentCity+'</p>';
			str+='<p>PM2.5：'+data.pm25+'</p>';
			str+='<p>今日天气：'+weather[0].temperature+' '+weather[0].weather+'</p>';
			str+='<p>明日天气：'+weather[1].temperature+' '+weather[1].weather+'</p>';
			console.log(data);
			console.log(data.currentCity);
			console.log(weather);
			$('.ct').html(str)
		}
		
	</script>
</body>
</html>